{"source":2,"id":1,"revision":25,"name":"mollwhexo-CI - CD","description":null,"createdBy":{"id":"638409aa-f4ae-4d30-9a10-e7314326b9fd","displayName":"Adam Ydenius","uniqueName":"adam.ydenius@outlook.com","url":"https://app.vssps.visualstudio.com/Ad2287715-f217-4b1a-9b5e-48b7357fecfa/_apis/Identities/638409aa-f4ae-4d30-9a10-e7314326b9fd","imageUrl":"https://mollwe.visualstudio.com/_api/_common/identityImage?id=638409aa-f4ae-4d30-9a10-e7314326b9fd&t=00000000-0000-0000-5027-017b6735d508"},"createdOn":"2017-11-26T03:19:22.390Z","modifiedBy":{"id":"638409aa-f4ae-4d30-9a10-e7314326b9fd","displayName":"Adam Ydenius","uniqueName":"adam.ydenius@outlook.com","url":"https://app.vssps.visualstudio.com/Ad2287715-f217-4b1a-9b5e-48b7357fecfa/_apis/Identities/638409aa-f4ae-4d30-9a10-e7314326b9fd","imageUrl":"https://mollwe.visualstudio.com/_api/_common/identityImage?id=638409aa-f4ae-4d30-9a10-e7314326b9fd&t=00000000-0000-0000-5027-017b6735d508"},"modifiedOn":"2017-11-26T05:39:09.707Z","isDeleted":false,"path":"\\","variables":{},"variableGroups":[],"environments":[{"id":1,"name":"GitHub","rank":1,"owner":{"id":"638409aa-f4ae-4d30-9a10-e7314326b9fd","displayName":"Adam Ydenius","uniqueName":"adam.ydenius@outlook.com","url":"https://app.vssps.visualstudio.com/Ad2287715-f217-4b1a-9b5e-48b7357fecfa/_apis/Identities/638409aa-f4ae-4d30-9a10-e7314326b9fd","imageUrl":"https://mollwe.visualstudio.com/_api/_common/identityImage?id=638409aa-f4ae-4d30-9a10-e7314326b9fd&t=00000000-0000-0000-5027-017b6735d508"},"variables":{"privatekey":{"value":""}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":1}]},"deployStep":{"tasks":[],"id":2},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":3}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":true,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":22,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent phase","workflowTasks":[{"taskId":"a433f589-fce1-4460-9ee6-44a624aeb1fb","version":"0.*","name":"Download ssh artifact","refName":"DownloadBuildArtifacts3","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"buildType":"current","project":"","definition":"","buildId":"","downloadType":"single","artifactName":"ssh","itemPattern":"**","downloadPath":"./","parallelizationLimit":"8"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Setup SSH","refName":"CmdLine1","enabled":true,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"#echo List files in ssh artifact\n#ls -al ./ssh\necho Make directory for ~/.ssh\nmkdir ~/.ssh\necho Move files from ssh artifact into ~/.ssh\nmv ./ssh/* ~/.ssh/\necho List files in ~/.ssh\nls -al ~/.ssh\necho Contents of config\ncat ~/.ssh/config\necho \"\"\necho Contents of id_rsa\ncat ~/.ssh/id_rsa\necho \"\"\necho chmod id_rsa\nchmod 400 ~/.ssh/id_rsa\necho Setup known hosts\nssh-keyscan -t rsa github.com >> ~/.ssh/known_hosts\n#echo test ssh\n#ssh -v -T git@github.com\n","workingDirectory":"","failOnStderr":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"git clone","refName":"CmdLine2","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"filename":"git","arguments":"clone git@github.com:mollwe/mollwe.github.io.git drop","workingFolder":"","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"git rm","refName":"CmdLine4","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"filename":"git","arguments":"rm -r *","workingFolder":"drop","failOnStandardError":"false"}},{"taskId":"a433f589-fce1-4460-9ee6-44a624aeb1fb","version":"0.*","name":"Download drop artifact","refName":"DownloadBuildArtifacts1","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"buildType":"current","project":"","definition":"","buildId":"","downloadType":"single","artifactName":"drop","itemPattern":"**","downloadPath":"./","parallelizationLimit":"8"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"git add","refName":"CmdLine5","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"filename":"git","arguments":"add .","workingFolder":"drop","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"git commit","refName":"CmdLine7","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"git config user.email \"mollwe@gmail.com\"\ngit config user.name \"Adam Ydenius\"\ngit commit -m \"Updated site to $(Release.ReleaseName)\"","workingDirectory":"drop","failOnStderr":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"git push","refName":"CmdLine6","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"filename":"git","arguments":"push","workingFolder":"drop","failOnStandardError":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]}}],"artifacts":[{"sourceId":"02cd26b8-55c0-4a0f-807a-46395dc1f73d:4","type":"Build","alias":"mollwhexo-CI","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://mollwe.visualstudio.com/_permalink/_build/index?collectionId=b8eacb30-87df-46a3-a760-f0c89f27d9fe&projectId=02cd26b8-55c0-4a0f-807a-46395dc1f73d&definitionId=4","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"4","name":"mollwhexo-CI"},"project":{"id":"02cd26b8-55c0-4a0f-807a-46395dc1f73d","name":"mollwhexo"}},"isPrimary":true}],"triggers":[{"artifactAlias":"mollwhexo-CI","triggerConditions":[{"sourceBranch":"master","tags":[]}],"triggerType":1}],"releaseNameFormat":"Release-$(rev:r)","url":"https://mollwe.vsrm.visualstudio.com/02cd26b8-55c0-4a0f-807a-46395dc1f73d/_apis/Release/definitions/1","_links":{"self":{"href":"https://mollwe.vsrm.visualstudio.com/02cd26b8-55c0-4a0f-807a-46395dc1f73d/_apis/Release/definitions/1"},"web":{"href":"https://mollwe.visualstudio.com/02cd26b8-55c0-4a0f-807a-46395dc1f73d/_release?definitionId=1"}},"tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"BuildSummary"}}}